<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=generator content="Hugo 0.128.0"><title>Ubuntu Mate on Thinkpad T470 &#183; Coding Notes</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/2.0.6/pure-min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/2.0.6/grids-responsive-min.css><link rel=stylesheet href=https://pbedn.github.io/css/side-menu.css><link rel=stylesheet href=https://pbedn.github.io/css/blackburn.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link href="https://fonts.googleapis.com/css?family=Raleway" rel=stylesheet type=text/css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js></script><link rel="shortcut icon" href=https://pbedn.github.io/img/favicon.ico type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVR0TPVEEJ"></script><script>if(window.location.hostname!="localhost"){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JVR0TPVEEJ")}</script></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=https://pbedn.github.io/>PBedn</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://pbedn.github.io/><i class='fa fa-home fa-fw'></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://pbedn.github.io/archives/><i class='fa fa-list fa-fw'></i>Archives</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://pbedn.github.io/about/><i class='fa fa-user fa-fw'></i>About</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://pbedn.github.io/projects/><i class='fa fa-cog fa-fw'></i>Projects</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://pbedn.github.io/books/><i class='fa fa-book fa-fw'></i>Books</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://linkedin.com/in/pbedn target=_blank><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://github.com/pbedn target=_blank><i class="fa fa-github-square fa-fw"></i>GitHub</a></li></ul></div><div><div class=small-print><small>&#169; 2021 Pawel Bednarz</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div><div><input id=highlight type=button value="Highlight Code Dark" class=pure-button style=font-size:65%;background:#999;text-align:center></div></div><div id=main><main><div class=header><h2>Ubuntu Mate on Thinkpad T470</h2><h3></h3></div><div class=content><div class=post-meta><div class=dark-color><i class="fa fa-calendar fa-fw"></i>
<time>01 Feb 2018</time>
.. <i class="fa fa-clock-o" aria-hidden=true>3 min</i></div><div><i class="fa fa-tags fa-fw"></i>
<a class=post-taxonomy-tag href=https://pbedn.github.io/tags/ubuntu>ubuntu</a>&nbsp;/
<a class=post-taxonomy-tag href=https://pbedn.github.io/tags/thinkpad>thinkpad</a></div></div><p>Update:
After recent update laptop freezes at boot!</p><p>I was looking for a new laptop for some time now, and specifically, I wanted to try ThinkPad series, based on sound reviews. Electronic equipment in Poland has a higher price compared to for example the USA, but I bought on a sale a T470 without Windows preinstalled for 1140$ (3800 PLN on 26 Jan 2018). The usual price for this model was around 5000 PLN. Anyway, I was going to install Ubuntu, with choices between Lubuntu (my long-time favourite on all virtual machines) and Ubuntu Mate (more pretty but not so heavy as default Unity or currently Gnome 3).</p><p>The second consideration was to choose 16.04 LTS, especially after recent bad news for some Lenovo users who installed 17.10 and their laptop got bricked because of BIOS failure (T470 was not on &lsquo;broken&rsquo; list but let&rsquo;s not play with the devil). I expect somewhere in late autumn to switch to 18.04 after it is tried out for some months.</p><p>My specification:</p><ul><li>Model: 20HES07J00</li><li>CPU: i5-7200U</li><li>SSD: 256GB</li><li>RAM: 8GB</li><li>Graphics: Intel 620</li><li>Battery: 3 + 3</li></ul><hr><p>My first impression after few hours was that this is excellent notebook. A bit heavier than my previous Toshiba Portege Z930 (1.12 kg), this one weights 1.64 kg. Still, the keyboard is the best I have used so far, and for me, it is much better than the one in MacBook Pro 2017 13" I had a chance to test. What I have got used to is a different layout of Home and End buttons (right edge) and Ctrl first (Thinkpad has Fn).</p><p>I have installed Ubuntu Mate 16.04 from a usb stick, prepared earlier on my older Windows 10 laptop with Rufus app. No problems during installation. I have chosen default settings for hard drive formatting, as I am not going to have two systems running. And I learned my lesson not to break Linux root system on the same day&mldr;</p><p><strong>Almost everything works out-of-the-box except:</strong></p><ol><li>Keyboard backlight was resetting to 50% each time after few seconds of inactivity or power state change</li><li>Microphone key shortcut was not working</li><li>Brightness had strange behaviour, changing level one step up after few seconds of inactivity but not permanently like with keyboard backlight.</li><li>Surprising quick battery discharge (max 6-7 hours for economy usage instead of 14 advertised ..)</li></ol><p><strong>Reg. 1:</strong></p><p>Resolution found on <a href=https://ubuntu-mate.community/t/keyboard-light-keeps-turning-on-after-login-and-or-unlock/6914/12 target=_blank>ubuntu-mate.community</a>.</p><p>Edit the file:</p><pre tabindex=0><code>/etc/dbus-1/system.d/org.freedesktop.UPower.conf.
</code></pre><p>And change:</p><pre tabindex=0><code>&lt;allow send_destination=&#34;org.freedesktop.UPower&#34;
send_interface=&#34;org.freedesktop.UPower.KbdBacklight&#34;/&gt;
</code></pre><p>To</p><pre tabindex=0><code>&lt;deny send_destination=&#34;org.freedesktop.UPower&#34;
send_interface=&#34;org.freedesktop.UPower.KbdBacklight&#34;/&gt;
</code></pre><p>Reboot.</p><p><strong>Reg. 2:</strong></p><p>As this is a longer solution, I will provide a link to <a href=https://askubuntu.com/questions/125367/enabling-mic-mute-button-and-light-on-lenovo-thinkpads#Determining target=_blank>AskUbuntu</a>. I have chosen the first solution marked as c-1. The only thing that is annoying - power indicator blinking when mic mute is on.</p><p><strong>Reg. 3:</strong></p><p>Add parameter to grub session. How to do it: <a href=https://wiki.ubuntu.com/Kernel/KernelBootParameters target=_blank>wiki.ubuntu</a>.</p><pre tabindex=0><code>acpi_backlight=none
</code></pre><p><a href=https://github.com/mate-desktop/mate-power-manager/issues/216#issuecomment-330727162 target=_blank>Link to original solution</a></p><p><strong>Reg. 4:</strong></p><p>I propose to install the latest version of tlp - <a href=http://linrunner.de/en/tlp/docs/tlp-linux-advanced-power-management.html target=_blank>link to website</a>:</p><pre tabindex=0><code>sudo add-apt-repository ppa:linrunner/tlp
sudo apt update
sudo apt install tlp tlp-rdw tp-smapi-dkms acpi-call-dkms
</code></pre><p>Start and see status</p><pre tabindex=0><code>sudo tlp start
sudo tlp-stat
</code></pre><p>And diagnose usage with</p><pre tabindex=0><code>sudo apt install powertop
sudo powertop
</code></pre><p>Worse battery management on Ubuntu is something I would have to live with, in the worst case I can always buy additional external 72 Wh battery, and thanks to dual setup just swap when needed.</p><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=https://pbedn.github.io/post/2017-09-22-best-python-ide/><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=https://pbedn.github.io/post/2017-09-22-best-python-ide/>Best Python IDE: Sublime Text vs PyCharm vs Wing IDE</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=https://pbedn.github.io/post/2018-03-10-ubuntu-16.04-thinkpad-t470/>Ubuntu 16.04 on Thinkpad T470</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=https://pbedn.github.io/post/2018-03-10-ubuntu-16.04-thinkpad-t470/><i class="fa fa-chevron-right"></i></a></div></div></div></main></div></div><footer><script src=https://pbedn.github.io/js/ui.js></script><script src=https://pbedn.github.io/js/menus.js></script><script type=text/javascript>$("#highlight").click(function(){$("head").append('<link href="https://pbedn.github.io/css/atom-one-dark.css" rel="stylesheet" id="mycss"/>')})</script></footer></body></html>